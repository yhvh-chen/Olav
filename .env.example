# ============================================
# OLAV .env.example
#
# Copy this file to `.env` and edit.
# This template mirrors the keys commonly used in `.env` + `config/settings.py`.
# ============================================

# =============================================================================
# Deployment Mode
# =============================================================================

# Default is QuickTest (auth disabled). Production enables auth.
# setup.ps1/setup.sh default to QuickTest unless you pass Production, or set OLAV_MODE=production.
OLAV_MODE=quicktest

# =============================================================================
# LLM Configuration
# =============================================================================

# Provider: openai | ollama | azure
LLM_PROVIDER=ollama

# If using OpenAI/OpenRouter/Azure, set your API key (secret)
LLM_API_KEY=changeme

# Model name depends on provider (examples: gpt-4o, gpt-4-turbo, x-ai/grok-4.1-fast, qwen2.5:32b)
LLM_MODEL_NAME=changeme

# Base URL:
# - Ollama (local): http://localhost:11434 (host) or http://host.docker.internal:11434 (inside docker)
# - OpenRouter: https://openrouter.ai/api/v1
# - OpenAI: https://api.openai.com/v1
LLM_BASE_URL=changeme

# Optional tuning
# LLM_FAST_MODEL=gpt-3.5-turbo
# LLM_TEMPERATURE=0.1
# LLM_MAX_TOKENS=16384

# =============================================================================
# Embedding Configuration
# =============================================================================

# Provider: openai | ollama
EMBEDDING_PROVIDER=changeme

# If provider=openai, set embedding API key (secret). If omitted, the app may reuse LLM_API_KEY.
# EMBEDDING_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx

EMBEDDING_MODEL=changeme
EMBEDDING_BASE_URL=changeme
# EMBEDDING_DIMENSIONS=768

# =============================================================================
# Device Credentials (for NETCONF/CLI backends)
# =============================================================================

DEVICE_USERNAME=changeme
DEVICE_PASSWORD=changeme
DEVICE_ENABLE_PASSWORD=

# =============================================================================
# SuzieQ Tagging (used by some init / inventory workflows)
# =============================================================================

SUZIEQ_TAG_NAME=suzieq
SUZIEQ_AUTO_TAG_ALL=true

# =============================================================================
# NetBox (SSOT)
# =============================================================================

# Device selection tag used consistently across:
# - NetBox inventory init auto-tagging
# - SuzieQ poller inventory-from-NetBox filter
# - Nornir inventory filter
NETBOX_DEVICE_TAG=olav-managed

# Whether to start the built-in NetBox stack (docker compose profile: netbox)
# - true: start NetBox first, wait until healthy, then run inventory init
# - false: skip NetBox entirely (SuzieQ poller inventory-from-NetBox will not work)
NETBOX_ENABLED=true

# Whether to run NetBox inventory initialization during setup.ps1
# - true: run `uv run olav init netbox --csv ...` after NetBox becomes healthy
# - false: skip init (useful if you manage NetBox inventory externally)
NETBOX_AUTO_INIT=true

# Force re-import / re-tag during init (passed as --force)
NETBOX_AUTO_INIT_FORCE=false

# Inventory CSV path (host path relative to repo root, or absolute path)
# Used by setup.ps1 to initialize NetBox devices from CSV.
INVENTORY_CSV_PATH=config/inventory.csv

# NetBox URL notes:
# - NETBOX_URL is used by host-side scripts/CLI (often set to http://127.0.0.1:<NETBOX_PORT> by setup.ps1)
# - NETBOX_URL_INTERNAL is used when generating configs consumed by containers (must NOT be localhost/127.0.0.1)
NETBOX_URL=http://netbox:8080
NETBOX_URL_INTERNAL=http://netbox:8080

# NetBox API token (secret). For built-in NetBox, docker-compose uses this to bootstrap SUPERUSER_API_TOKEN.
NETBOX_TOKEN=changeme

# Built-in NetBox superuser bootstrap (used by docker-compose only)
NETBOX_SUPERUSER_NAME=admin
NETBOX_SUPERUSER_EMAIL=admin@olav.local
NETBOX_SUPERUSER_PASSWORD=changeme
NETBOX_SECRET_KEY=changeme

# =============================================================================
# PostgreSQL (docker)
# =============================================================================

POSTGRES_USER=olav
POSTGRES_PASSWORD=changeme
POSTGRES_DB=olav

# =============================================================================
# OpenSearch (docker)
# =============================================================================

# QuickTest defaults to security disabled; Production should set this to false.
OPENSEARCH_SECURITY_DISABLED=true

# When security enabled (Production), these are required.
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=changeme
OPENSEARCH_INITIAL_ADMIN_PASSWORD=changeme

# =============================================================================
# OLAV Server Authentication
# =============================================================================

# Required in Production (secret). QuickTest does not require it.
# OLAV_API_TOKEN=replace-with-strong-master-token

# =============================================================================
# Docker Host Port Mapping (host -> container default ports)
# =============================================================================

# Change these if you hit Windows reserved port ranges.
OPENSEARCH_PORT=9200
OPENSEARCH_METRICS_PORT=9600
POSTGRES_PORT=5432
NETBOX_PORT=8080
SUZIEQ_GUI_PORT=8501
OLAV_APP_PORT=8888
OLAV_SERVER_PORT=8000
FLUENT_SYSLOG_PORT=514
FLUENT_HTTP_PORT=2020
# COLLECTOR_FORCE_ENABLE=false       # Default: false
# COLLECTOR_MIN_PRIVILEGE=15         # Default: 15
# COLLECTOR_BLACKLIST_FILE=command_blacklist.txt  # Default
# COLLECTOR_CAPTURE_DIFF=true        # Default: true

# --- Agentic RAG Configuration
# ENABLE_AGENTIC_RAG=true            # Default: true (FastPath memory capture)
# ENABLE_DEEP_DIVE_MEMORY=true       # Default: true (Deep Dive report auto-save)

# =============================================================================
# ETL & INDEX CONFIGURATION
# =============================================================================

# --- Force Reset Indexes (use in Docker init container)
# OLAV_ETL_FORCE_RESET=false         # Default: false (skip existing indexes)
                                     # Set to true to delete and recreate all indexes

# --- Individual Index Control (optional, override global FORCE_RESET)
# OLAV_ETL_FORCE_SUZIEQ=false        # Force reset suzieq-schema index
# OLAV_ETL_FORCE_OPENCONFIG=false    # Force reset openconfig-schema index
# OLAV_ETL_FORCE_NETBOX=false        # Force reset netbox-schema index
# OLAV_ETL_FORCE_EPISODIC=false      # Force reset olav-episodic-memory index

# --- OpenConfig YANG Repository Path (for full YANG parsing)
# OPENCONFIG_DIR=/path/to/openconfig-public  # Default: uses stub data if not set

# =============================================================================
# SUZIEQ POLLER TUNING (for large networks)
# =============================================================================

# --- Polling Interval (seconds)
# SUZIEQ_POLLER_PERIOD=60           # Default: 60 (increase for 200+ devices)
#                                   # Recommended: 60 (1-50 devices), 120 (50-200), 300 (500+)

# --- Timeout Settings
# SUZIEQ_CONNECT_TIMEOUT=30         # Default: 30 (SSH/API connect timeout)
# SUZIEQ_CMD_TIMEOUT=60             # Default: 60 (per-command execution timeout)

# --- Parallel Execution
# SUZIEQ_MAX_CMD_PIPELINE=10        # Default: 10 (commands pipelined per device)

# --- Chunked Polling (critical for large inventories)
# SUZIEQ_CHUNKED_POLL=true          # Default: true (process devices in chunks)
# SUZIEQ_CHUNK_SIZE=25              # Default: 25 (devices per chunk)
#                                   # Increase memory if using larger chunks

# --- Inventory Refresh
# SUZIEQ_INVENTORY_UPDATE_PERIOD=3600  # Default: 3600 (1 hour)

# --- Coalescer (data compaction)
# SUZIEQ_COALESCER_PERIOD=1h        # Default: 1h

