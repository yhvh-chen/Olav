# ğŸ¤– OLAV - Enterprise Network Operations AI Assistant

**Version**: 0.8.0  
**Status**: âœ… Phase 1-5 Production Ready  
**Architecture**: DeepAgents Native + Three-Layer Knowledge Architecture (Skills/Knowledge/Tools)  
**Platform**: Compatible with Claude Code, supports Windows/Mac/Linux  

**[ä¸­æ–‡æŒ‡å—](i18n/zh.md)** | **English Guide**

---

## ğŸ“‹ Table of Contents

- [Quick Start](#quick-start)
- [Features](#features)
- [Development Phases](#development-phases)
- [Installation](#installation)
- [Usage Examples](#usage-examples)
- [Architecture](#architecture)
- [Technology Stack](#technology-stack)

---

## Quick Start

### 1ï¸âƒ£ Environment Setup (5 minutes)

```bash
# Install dependencies (using uv - fast package manager)
uv sync --dev

# Copy environment configuration
cp .env.example .env
# Edit .env and add your device information and API keys
```

### 2ï¸âƒ£ Run Your First Command

```bash
# Query device status
uv run python -m olav.main "Check R1 interface status"

# Perform comprehensive inspection
uv run python -m olav.main "Inspect all lab devices"

# Search capability library
uv run python -m olav.main "How to check BGP neighbors?"
```

### 3ï¸âƒ£ Use with Claude Code

```
1. Navigate to the project directory
2. Open in Claude Code
3. View available skills: `/skills/device-inspection`
4. Send command: "Inspect all lab devices with full L1-L4 health check"
```

---

## Features

### ğŸ¯ Three Core Capabilities

#### 1. **Device Inspection** - Comprehensive Device Health Check
- **L1 Physical Layer**: CPU/Memory/Temperature/Power/Fans
- **L2 Data Link**: VLAN/STP/LLDP/MAC Table
- **L3 Network**: Routes/OSPF/BGP/VPNv4
- **L4 Transport**: TCP/Processes/Memory/Error Counters

#### 2. **Quick Query** - Fast 1-2 Command Responses
- Immediate responses for simple queries
- Automatic command selection
- Multi-vendor support (Cisco/Huawei/Arista)

Examples:
```
"Check R1 CPU usage"
"Show interface status on S1"
"Get BGP neighbors from R2"
```

#### 3. **Deep Analysis** - Multi-Step Complex Diagnostics
- Multi-step troubleshooting workflows
- Automatic problem localization
- Remediation suggestions

Examples:
```
"Diagnose why R1 BGP neighbors are down"
"Analyze interface error rates on core switches"
"Check network security baseline compliance"
```

---

## Development Phases

OLAV is developed in 5 progressive phases, each phase is fully production-ready:

### Phase 1: MVP (Core Framework) âœ…
- **DeepAgents Agent** foundation
- **Skill routing system**
- **Basic command execution** (Nornir)
- **Knowledge base** (aliases/topology)
- **Status**: âœ… Production Ready

### Phase 2: Skill System âœ…
- **Skill-based routing** - LLM intelligent routing
- **Bilingual support** - English/Chinese recognition
- **Three-layer knowledge architecture** - Skills/Knowledge/Tools
- **Multi-device support** - Automatic batch processing
- **Status**: âœ… Production Ready

### Phase 3: SubAgent Framework âœ…
- **Macro analysis** - Topology-level path analysis
- **Micro diagnostics** - Device-level layered diagnostics
- **Backward compatibility** - Preserved original skills
- **Automatic fallback** - Graceful degradation
- **Status**: âœ… Production Ready

### Phase 4: Inspection Automation âœ…
- **Comprehensive Inspection** - L1-L4 full coverage
- **Multi-device Reports** - Unified multi-device reports
- **Anomaly Detection** - Automatic anomaly flagging
- **HTML Report Generation** - Professional visualization
- **Status**: âœ… Production Ready

### Phase 5: Real Device Testing âœ…
- **Real Nornir Integration** - Actual device connections
- **Real LLM API** - Genuine LLM calls
- **Complete E2E Testing** - 16+ real scenarios
- **DuckDB Capability Library** - CLI/API/NETCONF command library
- **Status**: âœ… Production Ready

---

## Installation

### Prerequisites

- **Python 3.11+** (recommend 3.13)
- **uv** package manager (quick install: `pip install uv`)
- **Network devices** (Cisco IOS/XE, Huawei, Arista, etc.)
- **SSH access** to network devices

### Complete Installation Steps

```bash
# 1. Clone repository
git clone https://github.com/your-org/OLAV.git
cd OLAV

# 2. Install dependencies
uv sync --dev

# 3. Configure environment
cp .env.example .env
# Edit .env:
# - DEVICE_USERNAME=admin
# - DEVICE_PASSWORD=password
# - OPENAI_API_KEY=sk-...

# 4. Configure Nornir (network device inventory)
# Edit .olav/config/nornir/hosts.yaml
# Edit .olav/config/nornir/groups.yaml

# 5. Verify installation
uv run python -m olav.main "Check device connectivity"
```

---

## Usage Examples

### Example 1: Basic Device Query

```bash
# CLI mode
$ uv run python -m olav.main "R1 interface status"

# Expected output:
# R1 Gi0/1: UP, 1000Mbps
# R1 Gi0/2: UP, 1000Mbps
# R1 Gi0/3: DOWN
```

### Example 2: Comprehensive Device Inspection

```bash
# Perform L1-L4 comprehensive inspection on all lab devices
$ uv run python -m olav.main "Inspect all lab devices with comprehensive L1-L4 check"

# Generated reports:
# .olav/reports/lab-comprehensive-l1l4-20260108-143000.html
#   â”œâ”€ Executive Summary (overall status of all 8 devices)
#   â”œâ”€ L1-L4 layered data
#   â”œâ”€ Anomaly detection and flagging
#   â””â”€ Remediation suggestions
```

### Example 3: Deep Analysis Workflow

```bash
# Complex multi-step diagnostics
$ uv run python -m olav.main "Diagnose why BGP is flapping on R1 and provide remediation steps"

# Expected workflow:
# 1. Check BGP peer status
# 2. Analyze interface stability
# 3. Review routing table
# 4. Check CPU/memory on router
# 5. Provide recommendations
```

### Example 4: Using with Claude Code

```
Claude Code prompt:

"Use OLAV skills to:
1. Inspect all lab devices
2. Generate comprehensive health report
3. Flag any anomalies
4. Provide remediation suggestions"

Expected result:
âœ… Agent automatically matches device-inspection skill
âœ… Lists all lab group devices
âœ… Executes L1-L4 inspection
âœ… Generates HTML report to .olav/reports/
âœ… Extracts anomalies and suggests remediation
```

---

## æ¶æ„è®¾è®¡

### ä¸‰å±‚çŸ¥è¯†æ¶æ„
Architecture

### Three-Layer Knowledge Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          OLAV Three-Layer Knowledge Architecture        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  Layer 1: SKILLS (.olav/skills/*.md)                  â”‚
â”‚  â”œâ”€ device-inspection    â†’ Comprehensive L1-L4 check  â”‚
â”‚  â”œâ”€ quick-query          â†’ Fast 1-2 command queries   â”‚
â”‚  â””â”€ deep-analysis        â†’ Multi-step diagnostics     â”‚
â”‚     [Strategy Layer - HOW: How to execute tasks]       â”‚
â”‚                                                        â”‚
â”‚  Layer 2: KNOWLEDGE (.olav/knowledge/*.md)            â”‚
â”‚  â”œâ”€ aliases.md           â†’ Device alias mapping       â”‚
â”‚  â”œâ”€ topology.md          â†’ Network topology           â”‚
â”‚  â””â”€ platform-commands.md â†’ Multi-vendor command lib   â”‚
â”‚     [Knowledge Layer - WHAT: What are facts]          â”‚
â”‚                                                        â”‚
â”‚  Layer 3: TOOLS/CAPABILITIES                          â”‚
â”‚  â”œâ”€ Nornir               â†’ SSH batch execution        â”‚
â”‚  â”œâ”€ DuckDB              â†’ CLI/API/NETCONF library     â”‚
â”‚  â”œâ”€ Jinja2              â†’ Report template generation  â”‚
â”‚  â””â”€ LangChain           â†’ LLM integration             â”‚
â”‚     [Capability Layer - CAN: What we can do]          â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Execution Flow

```
User Input
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM Skill Router        â”‚
â”‚ (Intent Recognition +   â”‚
â”‚  Routing)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
      Select Skill
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skill Execution Engine   â”‚
â”‚ (Parse scope +           â”‚
â”‚  Execute commands)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    Nornir Batch Execution
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Report Generation        â”‚
â”‚ (Jinja2 templates +      â”‚
â”‚  HTML output)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Technology Stack

### Core Technologies

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **Framework** | DeepAgents | Agent orchestration and HITL |
| **LLM** | OpenAI/Claude | Intent recognition and routing |
| **Network** | Nornir 3.3 | Multi-device batch execution |
| **Database** | DuckDB 0.8 | Lightweight capability library |
| **Templates** | Jinja2 3.1 | HTML report generation |
| **Testing** | Pytest 9.0 | Complete E2E testing |
| **Package Manager** | uv | Fast dependency management |
| **Code Quality** | Ruff | Linting + formatting |

### Key Features

âœ… **Small Core, Large Ecosystem** - Small core extended via Markdown  
âœ… **Claude Code Compatible** - `.olav/` structure aligns with `.claude/`  
âœ… **Multi-Vendor Support** - Cisco/Huawei/Arista/Juniper, etc.  
âœ… **Intelligent Routing** - LLM automatically selects appropriate skills  
âœ… **Production Ready** - Complete testing, type checking, error handling  
âœ… **Easy to Extend** - Add new features by adding Markdown files  

---

## File Structure

```
OLAV/
â”œâ”€â”€ .olav/                     # OLAV configuration and knowledge base
â”‚   â”œâ”€â”€ OLAV.md               # Core system prompt
â”‚   â”œâ”€â”€ skills/               # 3 core skills (Markdown)
â”‚   â”‚   â”œâ”€â”€ device-inspection.md
â”‚   â”‚   â”œâ”€â”€ quick-query.md
â”‚   â”‚   â””â”€â”€ deep-analysis.md
â”‚   â”œâ”€â”€ knowledge/            # Knowledge base
â”‚   â”‚   â”œâ”€â”€ aliases.md        # Device aliases
â”‚   â”‚   â””â”€â”€ topology.md       # Network topology
â”‚   â”œâ”€â”€ config/nornir/        # Nornir inventory config
â”‚   â”œâ”€â”€ reports/              # Generated HTML reports
â”‚   â””â”€â”€ capabilities.db       # DuckDB command library
â”‚
â”œâ”€â”€ src/olav/                 # Main source code
â”‚   â”œâ”€â”€ agent.py             # DeepAgents creation
â”‚   â”œâ”€â”€ core/                # Core modules
â”‚   â”œâ”€â”€ tools/               # LangChain tools
â”‚   â””â”€â”€ main.py              # CLI entry point
â”‚
â”œâ”€â”€ i18n/                     # Internationalization
â”‚   â””â”€â”€ zh.md                # Chinese guide
â”‚
â”œâ”€â”€ pyproject.toml           # Project configuration (uv)
â””â”€â”€ README.md                # This file
```

---

## Quick Reference

### Common Commands

```bash
# Start OLAV CLI
uv run python -m olav.main

# Perform device inspection
uv run python -m olav.main "Inspect all lab devices"

# Query single device
uv run python -m olav.main "Check R1 status"

# Code quality checks
uv run ruff check src/ --fix

# Type checking
uv run mypy src/ --strict
```

---

## Support

### Troubleshooting

1. **Check logs**: `tail -f nornir.log`
2. **Verify configuration**: `.env` and `.olav/config/nornir/`
3. **Run diagnostics**: `uv run python -m olav.main "Test connectivity"`

### Feedback

- **Report Issues**: Describe the problem and reproduction steps
- **Contribute**: Ensure code quality and tests pass
- **Discuss Features**: Share your ideas

---

## License

MIT License - See LICENSE file for details

---

## Acknowledgments

- **DeepAgents Framework**: Powerful agent orchestration capabilities
- **Claude Code**: Inspired the three-layer knowledge architecture design
- **Nornir**: Excellent network automation framework
- **LangChain**: Flexible LLM integration

---

**OLAV v0.8** - *Build Network Intelligence with AI*

**Last Updated**: 2026-01-08 | **Maintained by
**OLAV v0.8** - *Build Network Intelligence with AI*

**æœ€åæ›´æ–°**: 2026-01-08 | **ç»´æŠ¤è€…**: GitHub Copilot + Claude Haiku 4.5
