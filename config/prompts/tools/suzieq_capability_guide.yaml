_type: prompt
input_variables: []
template: |
  # SuzieQ Tool Capability Guide
  
  SuzieQ is a network telemetry tool providing historical state queries and analysis capabilities.
  
  ## Tool Set
  
  **Must call in sequence**:
  1. `suzieq_schema_search` - Discover available tables and fields (dynamic, from OpenSearch)
  2. `suzieq_query` - Execute actual query (using discovered table names)
  
  ## Core Capabilities
  
  ### 1. Query Methods (method parameter)
  
  | Method | Purpose | Returns |
  |--------|---------|---------|
  | `get` | Get raw records | Detailed data list |
  | `summarize` | Statistical summary | Aggregated statistics |
  | `unique` | Unique values list | Deduplicated values |
  | `aver` | Assertion validation | Records matching/not matching expectations |
  
  ### 2. Time Window Filtering
  
  - `max_age_hours` parameter controls query time range
  - Default 24 hours, avoids stale data
  - Set to 0 for all historical data (trend analysis)
  
  ### 3. Smart Filtering
  
  - `hostname`: Filter by device (exact match)
  - `namespace`: Filter by namespace (logical grouping)
  - `**filters`: Any field filter (confirm field name via schema_search first)
  
  ### 4. Automatic Deduplication
  
  - Returns **latest state** for each entity
  - Prioritizes `active=True` records
  - Avoids time-series data duplication
  
  ## Chain of Thought - SuzieQ Queries
  
  <thinking>
  Step 1: Discover schema first
  - Call suzieq_schema_search to find available tables
  - Identify correct table name for the data needed
  - Get available field names for filtering
  
  Step 2: Choose query method
  - Need detailed records → use 'get'
  - Need statistics/overview → use 'summarize'
  - Need unique values → use 'unique'
  - Need compliance check → use 'aver'
  
  Step 3: Apply appropriate filters
  - Specific device → set hostname
  - Time-based → set max_age_hours
  - Field-specific → use discovered field names
  
  Step 4: Consider multi-table analysis
  - Complex diagnoses may need multiple tables
  - Correlate across BGP neighbors, interfaces, routes
  </thinking>
  
  ## Advanced Usage
  
  ### State Change Detection
  ```
  # Compare two time points (requires two queries)
  1. suzieq_query(table=<table>, max_age_hours=1)  # Last 1 hour
  2. suzieq_query(table=<table>, max_age_hours=24) # Compare with 24 hours
  ```
  
  ### Cross-Table Correlation Analysis
  ```
  # Diagnosing routing issues may require multiple related tables
  1. Routing protocol neighbor table → Check neighbor status
  2. Interface table → Check link status
  3. Route table → Check route correctness
  ```
  
  ### Batch Device Checks
  ```
  # Without specifying hostname, returns all devices' data
  suzieq_query(table=<table>, method="summarize")
  ```
  
  ## Important Notes
  
  - ✅ **Read-only tool** - Won't modify any device configuration
  - ✅ **Parquet storage** - Data from local files, no network latency
  - ⚠️ **Field names are case-sensitive** - Use schema_search to confirm
  - ⚠️ **Don't guess table names** - Always use schema_search first
  - ⚠️ **Data latency** - Depends on collection interval (typically 60 seconds)
