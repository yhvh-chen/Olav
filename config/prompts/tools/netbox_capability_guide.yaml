_type: prompt
input_variables: []
template: |
  # NetBox Tool Capability Guide
  
  NetBox is the Single Source of Truth (SSOT) for network infrastructure, providing device inventory, IP management, and topology information.
  
  ## Tool Set
  
  - `netbox_api_call` - Query NetBox REST API
  
  ## Core Capabilities
  
  ### 1. Device Management (DCIM)
  
  | Endpoint | Purpose | Common Filters |
  |----------|---------|----------------|
  | `/dcim/devices/` | Device list | name, role, site, status |
  | `/dcim/interfaces/` | Interface info | device, name, type |
  | `/dcim/cables/` | Cable connections | device, interface |
  | `/dcim/sites/` | Site info | name, region |
  | `/dcim/racks/` | Rack info | site, name |
  
  ### 2. IP Address Management (IPAM)
  
  | Endpoint | Purpose | Common Filters |
  |----------|---------|----------------|
  | `/ipam/ip-addresses/` | IP addresses | address, device, interface |
  | `/ipam/prefixes/` | Network prefixes | prefix, vrf, site |
  | `/ipam/vlans/` | VLANs | vid, name, site |
  | `/ipam/vrfs/` | VRFs | name, rd |
  
  ### 3. Virtualization
  
  | Endpoint | Purpose |
  |----------|---------|
  | `/virtualization/virtual-machines/` | Virtual machines |
  | `/virtualization/clusters/` | Clusters |
  
  ## Query Parameters
  
  ### Common Parameters
  - `limit`: Number of records to return (default 50)
  - `offset`: Pagination offset
  - `ordering`: Sort field (prefix with `-` for descending)
  
  ### Filter Syntax
  - Exact match: `name=R1`
  - Contains (case-insensitive): `name__ic=router`
  - Regex: `name__re=^R[0-9]+$`
  - Range: `created__gte=2024-01-01`
  
  ## Chain of Thought - NetBox Queries
  
  <thinking>
  Step 1: Identify resource type
  - Device inventory → DCIM endpoints
  - IP/VLAN management → IPAM endpoints
  - VM management → Virtualization endpoints
  
  Step 2: Determine required data
  - Basic device list → `/dcim/devices/`
  - Device with IPs → Query devices, then query IPs with device filter
  - Topology info → Query cables
  
  Step 3: Build query
  - Apply appropriate filters
  - Set reasonable limit
  - Consider pagination for large datasets
  </thinking>
  
  ## Advanced Usage
  
  ### Get Complete Device Info
  ```
  netbox_api_call(path="/dcim/devices/", name="R1")
  # Returns: primary_ip, site, rack, role, config_context, etc.
  ```
  
  ### Find Device Interface IPs
  ```
  # Step 1: Get device ID
  netbox_api_call(path="/dcim/devices/", name="R1")
  # Step 2: Get associated IPs
  netbox_api_call(endpoint="/ipam/ip-addresses/", device="R1")
  ```
  
  ### Topology Discovery
  ```
  # Get all cable connections for a device
  netbox_api_call(path="/dcim/cables/", device="R1")
  ```
  
  ## Important Notes
  
  - ✅ **Read-only queries** - Won't modify NetBox data (unless explicit write)
  - ✅ **Authoritative source** - The single source of truth for device inventory
  - ⚠️ **Real-time data** - Direct API queries, not cached
  - ⚠️ **Permission control** - May be limited by API token permissions
