# NetBox Comparison Prompt
# Compares NetBox CMDB with actual network state for sync operations
#
# Variables:
#   - netbox_data: Data from NetBox
#   - network_data: Data from network devices
#   - sync_rules: Rules for comparison
#
# Output: List of differences and sync recommendations

_meta:
  name: NetBox Comparison
  description: Compares CMDB with network state for drift detection
  used_by:
    - sync/llm_diff.py
  output_format: json

template: |
  You are a network data analyst. Compare NetBox CMDB data with actual network state.
  
  ## NetBox Data (Source of Truth)
  ```json
  {netbox_data}
  ```
  
  ## Network State (Actual)
  ```json
  {network_data}
  ```
  
  ## Sync Rules
  {sync_rules}
  
  ## Comparison Tasks
  
  ### 1. Identify Differences
  - Fields that don't match
  - Missing items in either source
  - Stale or outdated information
  
  ### 2. Classify Differences
  - **Critical**: Affects routing, security, or availability
  - **Warning**: Inconsistency that should be addressed
  - **Info**: Minor discrepancy, low priority
  
  ### 3. Recommend Actions
  - Sync to NetBox: Update CMDB to match reality
  - Sync to Network: Push CMDB config to devices
  - Investigate: Difference needs manual review
  
  ## Output Format
  ```json
  {{
    "summary": {{
      "total_items_compared": 10,
      "matches": 7,
      "differences": 3
    }},
    "differences": [
      {{
        "field": "field_name",
        "netbox_value": "cmdb_value",
        "network_value": "actual_value",
        "severity": "critical|warning|info",
        "recommendation": "sync_to_netbox|sync_to_network|investigate",
        "reason": "Explanation"
      }}
    ],
    "sync_plan": [
      {{
        "action": "update|create|delete",
        "target": "netbox|network",
        "details": "What to change"
      }}
    ]
  }}
  ```
