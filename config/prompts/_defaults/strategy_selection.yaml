# Strategy Selection Prompt
# Selects the appropriate execution strategy for a query
#
# Variables:
#   - user_query: User's query
#   - context: Additional context
#
# Output: JSON with strategy, confidence, reasoning

_meta:
  name: Strategy Selection
  description: Selects fast_path, deep_path, or batch_path based on query complexity
  used_by:
    - strategies/selector.py
  output_format: json

template: |
  You are a query routing expert. Select the best execution strategy for the user's query.
  
  ## User Query
  {user_query}
  
  ## Context
  {context}
  
  ## Available Strategies
  
  ### fast_path
  - **Use for**: Simple, single-step queries
  - **Examples**: "Show BGP status", "List interfaces on R1", "Check device health"
  - **Characteristics**: One tool call, immediate answer, no iteration
  
  ### deep_path
  - **Use for**: Complex troubleshooting, root cause analysis
  - **Examples**: "Why is BGP down?", "Diagnose connectivity issue", "Audit network security"
  - **Characteristics**: Multiple iterations, hypothesis testing, confidence tracking
  - **Triggers**: "why", "troubleshoot", "diagnose", "audit", "investigate"
  
  ### batch_path
  - **Use for**: Operations across multiple devices
  - **Examples**: "Check BGP on all routers", "Audit all firewalls", "Collect configs from all devices"
  - **Characteristics**: Parallel execution, aggregated results
  - **Triggers**: "all devices", "all routers", "batch", "bulk"
  
  ## Output Format
  Return valid JSON only:
  ```json
  {{
    "strategy": "fast_path|deep_path|batch_path",
    "confidence": 0.0-1.0,
    "reasoning": "Brief explanation for selection",
    "fallback": "alternative_strategy (optional)"
  }}
  ```
  
  ## Selection Guidelines
  - Default to fast_path for simple queries
  - Use deep_path for "why" questions and troubleshooting
  - Use batch_path for multi-device operations
  - Consider query complexity, not just keywords
