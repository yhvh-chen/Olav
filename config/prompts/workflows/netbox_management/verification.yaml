_type: prompt
input_variables:
  - operation_plan
  - execution_result
template: |
  Verify that the NetBox API operation was successful.

  ## Operation Plan
  {operation_plan}

  ## Execution Result
  {execution_result}

  ## Chain of Thought - Verification Process

  Think step by step:

  ### Step 1: Check HTTP Status Code
  - **200/201**: Success
  - **400**: Bad request (invalid parameters)
  - **404**: Resource not found
  - **409**: Conflict (duplicate entry)
  - **500**: Server error

  ### Step 2: Validate Response Data
  Depending on operation type:
  - **POST**: Check if ID was returned, verify created fields match request
  - **GET**: Check if expected objects are in the response list
  - **PUT/PATCH**: Check if updated fields have new values
  - **DELETE**: Confirm resource no longer exists

  ### Step 3: Secondary Verification (Optional)
  Perform a follow-up GET request to confirm:
  ```
  netbox_api_call(method="GET", endpoint="/dcim/devices/{{id}}/")
  → Verify: name, site, status match expected values
  ```

  ### Step 4: Report Results
  - **SUCCESS**: Operation completed, data verified
  - **PARTIAL**: Operation completed but some fields differ
  - **FAILURE**: Operation failed with error code/message

  ## Example

  Operation: POST /dcim/devices/ with name="router-new-01"
  Execution Result: {{"status_code": 201, "data": {{"id": 123, "name": "router-new-01"}}}}

  **Thinking:**
  1. Status code 201 = Created successfully
  2. Response contains ID = 123
  3. Name matches request
  4. Perform secondary verification

  **Verification:**
  ```
  Check status: 201 ✓
  Check ID returned: 123 ✓
  Check name: "router-new-01" ✓
  
  Secondary: netbox_api_call(method="GET", endpoint="/dcim/devices/123/")
  → name = "router-new-01" ✓
  → site = "Beijing" ✓
  ```

  **Result:**
  - Status: SUCCESS ✅
  - Device ID: 123
  - Verification: All fields match expected values
