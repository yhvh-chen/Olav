_type: prompt
input_variables:
  - config_plan
template: |
  执行配置变更计划。

  ## 配置计划
  {config_plan}

  ## 执行要求

  1. **使用 NETCONF 优先**:
     - netconf_tool(device="xxx", operation="edit-config", xpath="...", payload="...")
     - 支持 merge/replace/delete 操作

  2. **CLI 作为 Fallback**:
     - 仅在 NETCONF 不可用时使用
     - cli_tool(device="xxx", commands=["config t", "vlan 100", "end"])

  3. **记录执行结果**:
     - 成功: 记录 transaction-id / commit 时间
     - 失败: 记录错误信息、设备响应

  ## 示例

  config_plan = {{\"devices\": [\"router1\"], \"operation\": \"edit-config\", ...}}
  执行:
  1. netconf_tool(
       device="router1",
       operation="edit-config",
       xpath="/interfaces/interface[name='Vlan100']",
       payload="<interface><name>Vlan100</name>...</interface>"
     )
  2. execution_result = {{\"status\": \"success\", \"transaction_id\": \"12345\", \"timestamp\": \"...\"}}
