_type: prompt
input_variables:
  - config_plan
  - execution_result
template: |
  Validate that configuration changes were successfully applied.

  ## Configuration Plan
  {config_plan}

  ## Execution Result
  {execution_result}

  ## Chain of Thought - Validation Process

  Think step by step:

  ### Step 1: Analyze What Was Configured
  - What configuration was applied?
  - Which devices were targeted?
  - What should the verification command/query be?

  ### Step 2: Choose Verification Method
  - **CLI Verification** (simple configs): `show running-config | include <keyword>`
  - **NETCONF Verification** (structured): `netconf_tool` with get-config operation
  - **SuzieQ Verification** (state-based): Query relevant tables after ~60s poller update

  ### Step 3: Execute Verification for Each Device
  Call the appropriate verification tool:
  - `cli_tool(device="X", command="show running-config | include logging")` for CLI
  - `netconf_tool(device="X", operation="get-config", xpath="/path")` for NETCONF
  - `suzieq_query(table='interfaces', hostname='X')` for state verification

  ### Step 4: Compare and Report
  - **PASS**: Configuration found and matches expected
  - **FAIL**: Configuration missing or differs from expected
  - **PARTIAL**: Some devices passed, some failed

  ## Example

  Plan: Configure logging host 192.168.100.10 on R1
  Execution: cli_tool succeeded

  **Thinking:**
  1. Need to verify logging host configuration on R1
  2. Best verification: CLI command `show running-config | include logging`
  3. Execute verification
  4. Check if "logging host 192.168.100.10" appears in output

  **Verification:**
  ```
  cli_tool(device="R1", command="show running-config | include logging")
  → Output: "logging host 192.168.100.10"
  → Result: PASS ✅
  ```

  ## Output Format

  Provide a structured validation result:
  - Overall Status: PASS / FAIL / PARTIAL
  - Per-device results with evidence
  - Recommendations if validation failed
